<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Rodrigo Pires, Anna Hepworth, Rebecca O’Leary and Adam H. Sparks" />


<title>weatherOz for DPIRD</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">weatherOz for DPIRD</h1>
<h4 class="author">Rodrigo Pires, Anna Hepworth, Rebecca O’Leary and
Adam H. Sparks</h4>


<div id="TOC">
<ul>
<li><a href="#about-dpird-data" id="toc-about-dpird-data">About DPIRD
Data</a></li>
<li><a href="#a-note-on-api-keys" id="toc-a-note-on-api-keys">A Note on
API Keys</a></li>
<li><a href="#working-with-dpird-data" id="toc-working-with-dpird-data">Working With DPIRD Data</a></li>
<li><a href="#getting-extreme-weather-values" id="toc-getting-extreme-weather-values">Getting Extreme Weather
Values</a>
<ul>
<li><a href="#available-values-for-extreme-weather" id="toc-available-values-for-extreme-weather">Available Values for
Extreme Weather</a></li>
<li><a href="#example-1-get-all-extremes-for-northam-wa" id="toc-example-1-get-all-extremes-for-northam-wa">Example 1: Get All
Extremes for Northam, WA</a></li>
<li><a href="#example-2-get-selected-extremes-for-northam-wa" id="toc-example-2-get-selected-extremes-for-northam-wa">Example 2: Get
Selected Extremes for Northam, WA</a></li>
</ul></li>
<li><a href="#getting-minute-data" id="toc-getting-minute-data">Getting
Minute Data</a>
<ul>
<li><a href="#available-values-for-minute-data" id="toc-available-values-for-minute-data">Available Values for Minute
Data</a></li>
<li><a href="#example-3-get-all-minute-data-for-the-past-24-hours" id="toc-example-3-get-all-minute-data-for-the-past-24-hours">Example 3:
Get All Minute Data for the Past 24 Hours</a></li>
<li><a href="#example-4-get-specific-time-and-date-data-for-specific-values" id="toc-example-4-get-specific-time-and-date-data-for-specific-values">Example
4: Get Specific Time and Date Data for Specific Values</a></li>
</ul></li>
<li><a href="#getting-summary-data" id="toc-getting-summary-data">Getting Summary Data</a>
<ul>
<li><a href="#available-values-for-summary-data" id="toc-available-values-for-summary-data">Available Values for Summary
Data</a></li>
<li><a href="#what-you-get-back" id="toc-what-you-get-back">What You Get
Back</a></li>
<li><a href="#example-5-get-annual-rainfall-since-2017" id="toc-example-5-get-annual-rainfall-since-2017">Example 5: Get Annual
Rainfall Since 2017</a></li>
<li><a href="#example-6-get-monthly-rainfall-since-2017" id="toc-example-6-get-monthly-rainfall-since-2017">Example 6: Get
Monthly Rainfall Since 2017</a></li>
<li><a href="#example-7-get-daily-rainfall-and-wind-from-beginning-of-2017-to-end-of-2018" id="toc-example-7-get-daily-rainfall-and-wind-from-beginning-of-2017-to-end-of-2018">Example
7: Get Daily Rainfall and Wind From Beginning of 2017 to End of
2018</a></li>
<li><a href="#example-8-get-hourly-rainfall-and-wind-from-beginning-of-2022-to-current" id="toc-example-8-get-hourly-rainfall-and-wind-from-beginning-of-2022-to-current">Example
8: Get Hourly Rainfall and Wind From Beginning of 2022 to
Current</a></li>
</ul></li>
<li><a href="#getting-apsim-ready-data" id="toc-getting-apsim-ready-data">Getting APSIM-ready Data</a>
<ul>
<li><a href="#what-you-get-back-1" id="toc-what-you-get-back-1">What You
Get Back</a></li>
<li><a href="#example-9-get-apsim-formatted-data-for-binnu-from-2022-04-01-to-2022-11-01" id="toc-example-9-get-apsim-formatted-data-for-binnu-from-2022-04-01-to-2022-11-01">Example
9: Get APSIM Formatted Data for Binnu From 2022-04-01 to
2022-11-01</a></li>
</ul></li>
<li><a href="#working-with-dpird-metadata" id="toc-working-with-dpird-metadata">Working With DPIRD Metadata</a>
<ul>
<li><a href="#finding-nearby-stations" id="toc-finding-nearby-stations">Finding Nearby Stations</a></li>
<li><a href="#example-10-finding-stations-nearby-a-known-station" id="toc-example-10-finding-stations-nearby-a-known-station">Example 10:
Finding Stations Nearby a Known Station</a></li>
<li><a href="#example-11-finding-stations-nearby-a-given-longitude-and-latitude" id="toc-example-11-finding-stations-nearby-a-given-longitude-and-latitude">Example
11: Finding Stations Nearby a Given Longitude and Latitude</a></li>
<li><a href="#example-12-finding-stations-in-both-the-dpird-and-silo-data-sets" id="toc-example-12-finding-stations-in-both-the-dpird-and-silo-data-sets">Example
12: Finding Stations in Both the DPIRD and SILO Data Sets</a></li>
<li><a href="#example-13-finding-stations-in-the-southwest-agriculture-region-of-western-australia" id="toc-example-13-finding-stations-in-the-southwest-agriculture-region-of-western-australia">Example
13: Finding Stations in the Southwest Agriculture Region of Western
Australia</a></li>
<li><a href="#checking-station-uptime-or-availability" id="toc-checking-station-uptime-or-availability">Checking Station Uptime
or Availability</a></li>
<li><a href="#example-14-checking-station-availability-for-current-year" id="toc-example-14-checking-station-availability-for-current-year">Example
14: Checking Station Availability for Current Year</a></li>
<li><a href="#example-15-checking-station-availability-for-a-set-time-period" id="toc-example-15-checking-station-availability-for-a-set-time-period">Example
15: Checking Station Availability for a Set Time Period</a></li>
<li><a href="#getting-station-metadata-for-the-dpird-network-stations" id="toc-getting-station-metadata-for-the-dpird-network-stations">Getting
Station Metadata for the DPIRD Network Stations</a></li>
<li><a href="#example-16-get-dpird-station-metadata" id="toc-example-16-get-dpird-station-metadata">Example 16: Get DPIRD
Station Metadata</a></li>
<li><a href="#example-17-get-rich-dpird-station-metadata-and-include-closed-stations" id="toc-example-17-get-rich-dpird-station-metadata-and-include-closed-stations">Example
17: Get Rich DPIRD Station Metadata and Include Closed Stations</a></li>
</ul></li>
</ul>
</div>

<div id="about-dpird-data" class="section level2">
<h2>About DPIRD Data</h2>
<p>From the DPIRD Weather Website’s <a href="https://weather.agric.wa.gov.au/about">“About” Page</a>.</p>
<blockquote>
<p>The Department of Primary Industries and Regional Development’s
(DPIRD) network of automatic weather stations and radars throughout the
state provide timely, relevant and local weather data to assist growers
and regional communities make more-informed decisions.</p>
<p>The weather station data includes air temperature, humidity,
rainfall, wind speed and direction, with most stations also measuring
incoming solar radiation to calculate evaporation. This website includes
dashboards for each station to visualise this data.</p>
</blockquote>
<p>Data from the DPIRD API are licenced under the <a href="https://creativecommons.org/licenses/by/3.0/au/deed.en">Creative
Commons Attribution 3.0 Licence (CC BY 3.0 AU)</a>.</p>
</div>
<div id="a-note-on-api-keys" class="section level2">
<h2>A Note on API Keys</h2>
<p>All examples in this vignette assume that you have stored your API
key in your .Renviron file. See <a href="https://rstats.wtf/r-startup.html#renviron">Chapter 8</a> in “What
They Forgot to Teach You About R” by Bryan <em>et al.</em> for more on
storing details in your .Renviron if you are unfamiliar.</p>
</div>
<div id="working-with-dpird-data" class="section level2">
<h2>Working With DPIRD Data</h2>
<p>Three functions are provided to streamline fetching data from the
DPIRD Weather 2.0 API endpoints.</p>
<ul>
<li><code>get_dpird_extremes()</code>, which returns the recorded
extreme values for the given station in the DPIRD weather station
network.;</li>
<li><code>get_dpird_minute()</code>, which returns weather data in
minute increments for stations in the DPIRD weather station network with
only the past two years being available; and</li>
<li><code>get_dpird_summaries()</code>, which returns weather data in 15
and 30 minute, hourly, daily, monthly or yearly summary values for
stations in the DPIRD weather station network.</li>
</ul>
</div>
<div id="getting-extreme-weather-values" class="section level2">
<h2>Getting Extreme Weather Values</h2>
<p>The <code>get_dpird_extremes()</code> function fetches and returns
nicely formatted individual extreme weather summaries from the DPIRD
Weather 2.0 API. You must provide a <code>station_code</code> and
<code>API_key</code>, the other arguments, <code>values</code> and
<code>include_closed</code> are optional.</p>
<div id="available-values-for-extreme-weather" class="section level3">
<h3>Available Values for Extreme Weather</h3>
<ul>
<li>all (which will return all of the following values),</li>
<li>erosionCondition,</li>
<li>erosionConditionLast7Days,</li>
<li>erosionConditionLast7DaysDays,</li>
<li>erosionConditionLast7DaysMinutes,</li>
<li>erosionConditionLast14Days,</li>
<li>erosionConditionLast14DaysDays,</li>
<li>erosionConditionLast14DaysMinutes,</li>
<li>erosionConditionMonthToDate,</li>
<li>erosionConditionMonthToDateDays,</li>
<li>erosionConditionMonthToDateMinutes,</li>
<li>erosionConditionMonthToDateStartTime,</li>
<li>erosionConditionSince12AM,</li>
<li>erosionConditionSince12AMMinutes,</li>
<li>erosionConditionSince12AMStartTime,</li>
<li>erosionConditionYearToDate,</li>
<li>erosionConditionYearToDateDays,</li>
<li>erosionConditionYearToDateMinutes,</li>
<li>erosionConditionYearToDateStartTime,</li>
<li>frostCondition,</li>
<li>frostConditionLast7Days,</li>
<li>frostConditionLast7DaysDays,</li>
<li>frostConditionLast7DaysMinutes,</li>
<li>frostConditionLast14Days,</li>
<li>frostConditionLast14DaysDays,</li>
<li>frostConditionLast14DaysMinutes,</li>
<li>frostConditionMonthToDate,</li>
<li>frostConditionMonthToDateDays,</li>
<li>frostConditionMonthToDateMinutes,</li>
<li>frostConditionMonthToDateStartTime,</li>
<li>frostConditionSince9AM,</li>
<li>frostConditionSince9AMMinutes,</li>
<li>frostConditionSince9AMStartTime,</li>
<li>frostConditionTo9AM,</li>
<li>frostConditionTo9AMMinutes,</li>
<li>frostConditionTo9AMStartTime,</li>
<li>frostConditionYearToDate,</li>
<li>frostConditionYearToDate,</li>
<li>frostConditionYearToDateMinutes,</li>
<li>frostConditionYearToDateStartTime,</li>
<li>heatCondition,</li>
<li>heatConditionLast7Days,</li>
<li>heatConditionLast7DaysDays,</li>
<li>heatConditionLast7DaysMinutes,</li>
<li>heatConditionLast14Days,</li>
<li>heatConditionLast14DaysDays,</li>
<li>heatConditionLast14DaysMinutes,</li>
<li>heatConditionMonthToDate,</li>
<li>heatConditionMonthToDateDays,</li>
<li>heatConditionMonthToDateMinutes,</li>
<li>heatConditionMonthToDateStartTime,</li>
<li>heatConditionSince12AM,</li>
<li>heatConditionSince12AMMinutes,</li>
<li>heatConditionSince12AMStartTime,</li>
<li>heatConditionYearToDate,</li>
<li>heatConditionYearToDateDays,</li>
<li>heatConditionYearToDateMinutes, and</li>
<li>heatConditionYearToDateStartTime</li>
</ul>
</div>
<div id="example-1-get-all-extremes-for-northam-wa" class="section level3">
<h3>Example 1: Get All Extremes for Northam, WA</h3>
<p>In the first example, we illustrate how to fetch all extreme values
available for Northam.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>(extremes <span class="ot">&lt;-</span> <span class="fu">get_dpird_extremes</span>(</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="at">station_code =</span> <span class="st">&quot;NO&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>))</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_extremes(station_code = &quot;NO&quot;): could not find function &quot;get_dpird_extremes&quot;</span></span></code></pre></div>
</div>
<div id="example-2-get-selected-extremes-for-northam-wa" class="section level3">
<h3>Example 2: Get Selected Extremes for Northam, WA</h3>
<p>Fetch only soil erosion extreme conditions for Northam, WA. The
documentation for <code>get_dpird_extremes()</code> contains a full
listing of the values that are available to query from this API
endpoint.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>(</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  extremes <span class="ot">&lt;-</span> <span class="fu">get_dpird_extremes</span>(</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;NO&quot;</span>,</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>    <span class="at">values =</span> <span class="st">&quot;erosionCondition&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  )</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>)</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_extremes(station_code = &quot;NO&quot;, values = &quot;erosionCondition&quot;): could not find function &quot;get_dpird_extremes&quot;</span></span></code></pre></div>
</div>
</div>
<div id="getting-minute-data" class="section level2">
<h2>Getting Minute Data</h2>
<p>This function fetches nicely formatted minute weather station data
from the DPIRD Weather 2.0 API for a maximum 24-hour period. You must
provide a <code>station_code</code> and <code>API_key</code>, the other
arguments, <code>start_date_time</code>, <code>minutes</code> and
<code>values</code> are optional.</p>
<div id="available-values-for-minute-data" class="section level3">
<h3>Available Values for Minute Data</h3>
<ul>
<li>all (which will return all of the following values),</li>
<li>airTemperature,</li>
<li>dateTime,</li>
<li>dewPoint,</li>
<li>rainfall,</li>
<li>relativeHumidity,</li>
<li>soilTemperature,</li>
<li>solarIrradiance,</li>
<li>wetBulb,</li>
<li>wind,</li>
<li>windAvgSpeed,</li>
<li>windMaxSpeed, and</li>
<li>windMinSpeed</li>
</ul>
</div>
<div id="example-3-get-all-minute-data-for-the-past-24-hours" class="section level3">
<h3>Example 3: Get All Minute Data for the Past 24 Hours</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>(</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  min_dat <span class="ot">&lt;-</span> <span class="fu">get_dpird_minute</span>(</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;NO&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  )</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_minute(station_code = &quot;NO&quot;): could not find function &quot;get_dpird_minute&quot;</span></span></code></pre></div>
</div>
<div id="example-4-get-specific-time-and-date-data-for-specific-values" class="section level3">
<h3>Example 4: Get Specific Time and Date Data for Specific Values</h3>
<p>If you wish to supply a specific start date and time and values, you
may do so as shown here.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>(</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  min_dat_t_rad_wind <span class="ot">&lt;-</span> <span class="fu">get_dpird_minute</span>(</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;NO&quot;</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="at">start_date_time =</span> <span class="st">&quot;2023-02-01 13:00:00&quot;</span>,</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    <span class="at">minutes =</span> <span class="dv">1440</span>,</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;airTemperature&quot;</span>,</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>               <span class="st">&quot;solarIrradiance&quot;</span>,</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>               <span class="st">&quot;wind&quot;</span>)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>  )</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>)</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_minute(station_code = &quot;NO&quot;, start_date_time = &quot;2023-02-01 13:00:00&quot;, : could not find function &quot;get_dpird_minute&quot;</span></span></code></pre></div>
</div>
</div>
<div id="getting-summary-data" class="section level2">
<h2>Getting Summary Data</h2>
<p>The function, <code>get_dpird_summary()</code>, fetches nicely
formatted minute weather station data from the DPIRD Weather 2.0 API for
a maximum 24-hour period. You must provide a <code>station_code</code>
and <code>API_key</code>, the other arguments,
<code>start_date_time</code>, <code>minutes</code> and
<code>values</code> are optional.</p>
<div id="available-values-for-summary-data" class="section level3">
<h3>Available Values for Summary Data</h3>
<ul>
<li>all (which will return all of the following values),</li>
<li>airTemperature,</li>
<li>airTemperatureAvg,</li>
<li>airTemperatureMax,</li>
<li>airTemperatureMaxTime,</li>
<li>airTemperatureMin,</li>
<li>airTemperatureMinTime,</li>
<li>apparentAirTemperature,</li>
<li>apparentAirTemperatureAvg,</li>
<li>apparentAirTemperatureMax,</li>
<li>apparentAirTemperatureMaxTime,</li>
<li>apparentAirTemperatureMin,</li>
<li>apparentAirTemperatureMinTime,</li>
<li>barometricPressure,</li>
<li>barometricPressureAvg,</li>
<li>barometricPressureMax,</li>
<li>barometricPressureMaxTime,</li>
<li>barometricPressureMin,</li>
<li>barometricPressureMinTime,</li>
<li>battery,</li>
<li>batteryMinVoltage,</li>
<li>batteryMinVoltageDateTime,</li>
<li>chillHours,</li>
<li>deltaT,</li>
<li>deltaTAvg,</li>
<li>deltaTMax,</li>
<li>deltaTMaxTime,</li>
<li>deltaTMin,</li>
<li>deltaTMinTime,</li>
<li>dewPoint,</li>
<li>dewPointAvg,</li>
<li>dewPointMax,</li>
<li>dewPointMaxTime,</li>
<li>dewPointMin,</li>
<li>dewPointMinTime,</li>
<li>erosionCondition,</li>
<li>erosionConditionMinutes,</li>
<li>erosionConditionStartTime,</li>
<li>errors,</li>
<li>etoShortCrop,</li>
<li>etoTallCrop,</li>
<li>evapotranspiration,</li>
<li>frostCondition,</li>
<li>frostConditionMinutes,</li>
<li>frostConditionStartTime,</li>
<li>heatCondition,</li>
<li>heatConditionMinutes,</li>
<li>heatConditionStartTime,</li>
<li>observations,</li>
<li>observationsCount,</li>
<li>observationsPercentage,</li>
<li>panEvaporation,</li>
<li>rainfall,</li>
<li>relativeHumidity,</li>
<li>relativeHumidityAvg,</li>
<li>relativeHumidityMax,</li>
<li>relativeHumidityMaxTime,</li>
<li>relativeHumidityMin,</li>
<li>relativeHumidityMinTime,</li>
<li>richardsonUnits,</li>
<li>soilTemperature,</li>
<li>soilTemperatureAvg,</li>
<li>soilTemperatureMax,</li>
<li>soilTemperatureMaxTime,</li>
<li>soilTemperatureMin,</li>
<li>soilTemperatureMinTime,</li>
<li>solarExposure,</li>
<li>wetBulb,</li>
<li>wetBulbAvg,</li>
<li>wetBulbMax,</li>
<li>wetBulbMaxTime,</li>
<li>wetBulbMin,</li>
<li>wetBulbMinTime,</li>
<li>wind,</li>
<li>windAvgSpeed, and</li>
<li>windMaxSpeed</li>
</ul>
</div>
<div id="what-you-get-back" class="section level3">
<h3>What You Get Back</h3>
<p>This function returns a <code>data.table</code> with
<code>station_code</code> and the date interval queried together with
the requested weather variables in alphabetical order. Please note this
function converts date-time columns from Coordinated Universal Time
‘UTC’} to Australian Western Standard Time ‘AWST’. The first ten columns
will always be:</p>
<ul>
<li><code>station_code</code>,</li>
<li><code>station_name</code>,</li>
<li><code>longitude</code>,</li>
<li><code>latitude</code>,</li>
<li><code>year</code>,</li>
<li><code>month</code>,</li>
<li><code>day</code>,</li>
<li><code>hour</code>,</li>
<li><code>minute</code>, and if <code>month</code> or finer is
present,</li>
<li><code>date</code> (a combination of year, month, day, hour, minute
as appropriate)</li>
</ul>
</div>
<div id="example-5-get-annual-rainfall-since-2017" class="section level3">
<h3>Example 5: Get Annual Rainfall Since 2017</h3>
<p>Use the default value for end date (current system date) to get
annual rainfall since 2017 until current year for Capel.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>(</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  annual_rain <span class="ot">&lt;-</span> <span class="fu">get_dpird_summaries</span>(</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;CL001&quot;</span>,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="st">&quot;20170101&quot;</span>,</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="at">interval =</span> <span class="st">&quot;yearly&quot;</span>,</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    <span class="at">values =</span> <span class="st">&quot;rainfall&quot;</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  )</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>)</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_summaries(station_code = &quot;CL001&quot;, start_date = &quot;20170101&quot;, : could not find function &quot;get_dpird_summaries&quot;</span></span></code></pre></div>
</div>
<div id="example-6-get-monthly-rainfall-since-2017" class="section level3">
<h3>Example 6: Get Monthly Rainfall Since 2017</h3>
<p>Use the default value for end date (current system date) to get
monthly rainfall since 2017 until current year for Capel.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>(</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>  monthly_rain <span class="ot">&lt;-</span> <span class="fu">get_dpird_summaries</span>(</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;CL001&quot;</span>,</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="st">&quot;20170101&quot;</span>,</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>    <span class="at">interval =</span> <span class="st">&quot;monthly&quot;</span>,</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    <span class="at">values =</span> <span class="st">&quot;rainfall&quot;</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>  )</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>)</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_summaries(station_code = &quot;CL001&quot;, start_date = &quot;20170101&quot;, : could not find function &quot;get_dpird_summaries&quot;</span></span></code></pre></div>
</div>
<div id="example-7-get-daily-rainfall-and-wind-from-beginning-of-2017-to-end-of-2018" class="section level3">
<h3>Example 7: Get Daily Rainfall and Wind From Beginning of 2017 to End
of 2018</h3>
<p>Use the default value for end date (current system date) to get daily
rainfall and wind records from 2017-01-01 to 2018-12-31 for Binnu. Note
that the Binnu station has two wind heights, 3m and 10m.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>(</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  daily_wind_rain <span class="ot">&lt;-</span> <span class="fu">get_dpird_summaries</span>(</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;BI&quot;</span>,</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="st">&quot;20170101&quot;</span>,</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>    <span class="at">end_date =</span> <span class="st">&quot;2018-12-31&quot;</span>,</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>    <span class="at">interval =</span> <span class="st">&quot;daily&quot;</span>,</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;rainfall&quot;</span>,</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>               <span class="st">&quot;wind&quot;</span>)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>  )</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>)</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_summaries(station_code = &quot;BI&quot;, start_date = &quot;20170101&quot;, : could not find function &quot;get_dpird_summaries&quot;</span></span></code></pre></div>
</div>
<div id="example-8-get-hourly-rainfall-and-wind-from-beginning-of-2022-to-current" class="section level3">
<h3>Example 8: Get Hourly Rainfall and Wind From Beginning of 2022 to
Current</h3>
<p>Use the default value for end date (current system date) to get
hourly rainfall and wind records from 2022-01-01 to Current Date for
Binnu. Note that the Binnu station has two wind heights, 3m and 10m.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>(</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  hourly_wind_rain <span class="ot">&lt;-</span> <span class="fu">get_dpird_summaries</span>(</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;BI&quot;</span>,</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="st">&quot;20220101&quot;</span>,</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="at">interval =</span> <span class="st">&quot;hourly&quot;</span>,</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;rainfall&quot;</span>,</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>               <span class="st">&quot;wind&quot;</span>)</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  )</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>)</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_summaries(station_code = &quot;BI&quot;, start_date = &quot;20220101&quot;, : could not find function &quot;get_dpird_summaries&quot;</span></span></code></pre></div>
</div>
</div>
<div id="getting-apsim-ready-data" class="section level2">
<h2>Getting APSIM-ready Data</h2>
<p>For work with APSIM, you can use <code>get_dpird_apsim()</code> to
get an object of DPIRD weather data in your R session that’s ready for
saving using <code>write_apsim_met()</code>, which is re-exported from
the CRAN package [apsimx] for your convenience. This function only needs
the <code>station_code</code>, <code>start_date</code>,
<code>end_date</code> and your <code>api_key</code> values to return the
necessary values.</p>
<div id="what-you-get-back-1" class="section level3">
<h3>What You Get Back</h3>
<p>An object of {apsimx} ‘met’ class, compatible with a
<code>data.frame</code>, that has daily data that include year, day,
radiation, max temperature, min temperature, rainfall, relative
humidity, evaporation and windspeed.</p>
</div>
<div id="example-9-get-apsim-formatted-data-for-binnu-from-2022-04-01-to-2022-11-01" class="section level3">
<h3>Example 9: Get APSIM Formatted Data for Binnu From 2022-04-01 to
2022-11-01</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>(</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  binnu <span class="ot">&lt;-</span> <span class="fu">get_dpird_apsim</span>(</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;BI&quot;</span>,</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="st">&quot;20220101&quot;</span>,</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>    <span class="at">end_date =</span> <span class="st">&quot;20221231&quot;</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>  )</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_apsim(station_code = &quot;BI&quot;, start_date = &quot;20220101&quot;, : could not find function &quot;get_dpird_apsim&quot;</span></span></code></pre></div>
</div>
</div>
<div id="working-with-dpird-metadata" class="section level2">
<h2>Working With DPIRD Metadata</h2>
<p>Three functions are provided to assist in fetching metadata about the
stations.</p>
<ul>
<li><code>find_nearby_stations()</code>, which returns a
<code>data.table</code> with the nearest weather stations to a given
geographic point or known station in either the DPIRD or BOM (from SILO)
networks.</li>
<li><code>find_stations_in()</code>, which returns a
<code>data.table</code> with the weather stations falling within a given
geographic area in either the DPIRD or BOM (from SILO) networks.</li>
<li><code>get_dpird_availability()</code>, which returns a
<code>data.table</code> with the availability for weather stations in
the DPIRD network providing the up time and data availability for a
given period of time.</li>
<li><code>get_stations_metadata()</code>, which returns a
<code>data.table</code> with the latest and most up-to-date information
available from the Weather 2.0 API on the stations’ geographic
locations, hardware details, <em>e.g.,</em> wind mast height, and
recording capabilities.</li>
</ul>
<div id="finding-nearby-stations" class="section level3">
<h3>Finding Nearby Stations</h3>
</div>
<div id="example-10-finding-stations-nearby-a-known-station" class="section level3">
<h3>Example 10: Finding Stations Nearby a Known Station</h3>
<p>Query WA only stations and return DPIRD’s stations nearest to the
Northam, WA station, “NO”, returning stations with 50 km of this
station.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>(</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  wa_stn <span class="ot">&lt;-</span> <span class="fu">find_nearby_stations</span>(</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;NO&quot;</span>,</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    <span class="at">distance_km =</span> <span class="dv">50</span>,</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="at">which_api =</span> <span class="st">&quot;dpird&quot;</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>  )</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>)</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt; Error in find_nearby_stations(station_code = &quot;NO&quot;, distance_km = 50, which_api = &quot;dpird&quot;): could not find function &quot;find_nearby_stations&quot;</span></span></code></pre></div>
</div>
<div id="example-11-finding-stations-nearby-a-given-longitude-and-latitude" class="section level3">
<h3>Example 11: Finding Stations Nearby a Given Longitude and
Latitude</h3>
<p>Using the longitude and latitude for Northam, WA, find all DPIRD
stations within a 50km radius of this geographic point.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>(</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  wa_stn_lonlat <span class="ot">&lt;-</span> <span class="fu">find_nearby_stations</span>(</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>    <span class="at">longitude =</span> <span class="fl">116.6620</span>,</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>    <span class="at">latitude =</span> <span class="sc">-</span><span class="fl">31.6540</span>,</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="at">distance_km =</span> <span class="dv">50</span>,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>    <span class="at">which_api =</span> <span class="st">&quot;dpird&quot;</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  )</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>)</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co">#&gt; Error in find_nearby_stations(longitude = 116.662, latitude = -31.654, : could not find function &quot;find_nearby_stations&quot;</span></span></code></pre></div>
</div>
<div id="example-12-finding-stations-in-both-the-dpird-and-silo-data-sets" class="section level3">
<h3>Example 12: Finding Stations in Both the DPIRD and SILO Data
Sets</h3>
<p>Query stations nearest DPIRD’s Northam, WA station, “NO” and return
both DPIRD and SILO/BOM stations within 50 km of this station.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>(</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>  wa_stn_all <span class="ot">&lt;-</span> <span class="fu">find_nearby_stations</span>(</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;NO&quot;</span>,</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    <span class="at">distance_km =</span> <span class="dv">50</span>,</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    <span class="at">which_api =</span> <span class="st">&quot;all&quot;</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>  )</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>)</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt; Error in find_nearby_stations(station_code = &quot;NO&quot;, distance_km = 50, which_api = &quot;all&quot;): could not find function &quot;find_nearby_stations&quot;</span></span></code></pre></div>
</div>
<div id="example-13-finding-stations-in-the-southwest-agriculture-region-of-western-australia" class="section level3">
<h3>Example 13: Finding Stations in the Southwest Agriculture Region of
Western Australia</h3>
<p>Using <code>find_stations_in()</code> is different than
<code>find_nearby_stations()</code> as it finds any stations that fall
within a boundary that you provide rather than using a single point to
search from. For detailed examples using named places or bounding boxes,
see the “weatherOz for SILO” vignette.</p>
<p>The {sf} object, <code>south_west_agricultural_region</code>, is
provided with {weatherOz} under the <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC BY 4.0
Licence</a> from the Department of Primary Industries and Regional
Development (DPIRD), so we can extract stations within this area of
Western Australia.</p>
<p>First, we can plot the <code>south_west_agricultural_region</code> to
see what it looks like.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt; Linking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="fu">ggplot</span>(south_west_agricultural_region) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>   <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>   <span class="fu">theme_map</span>()</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;south_west_agricultural_region&#39; not found</span></span></code></pre></div>
<p>Now we can use that to find stations that fall only within that part
of Western Australia. We’ll use the coordinate reference system (CRS)
provided by this {sf} object and find all stations, including those that
have closed.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>sw_wa <span class="ot">&lt;-</span> <span class="fu">find_stations_in</span>(</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="at">x =</span> south_west_agricultural_region,</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="at">include_closed =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="at">crs =</span> sf<span class="sc">::</span><span class="fu">st_crs</span>(south_west_agricultural_region)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt; Error in find_stations_in(x = south_west_agricultural_region, include_closed = TRUE, : could not find function &quot;find_stations_in&quot;</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>sw_wa</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;sw_wa&#39; not found</span></span></code></pre></div>
<p>We need to convert the <code>sw_wa</code> object from a
<code>data.table</code> to an <code>sf</code> object and transform it to
use the same CRS as the <code>south_west_agricultural_region</code>
object to map the results.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>sw_wa <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="at">x =</span> sw_wa,</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>),</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  <span class="at">crs =</span> <span class="st">&quot;EPSG:4326&quot;</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>)</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;sw_wa&#39; not found</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>sw_wa <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(<span class="at">x =</span> sw_wa, <span class="at">crs =</span> <span class="fu">st_crs</span>(south_west_agricultural_region))</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;sw_wa&#39; not found</span></span></code></pre></div>
<p>Now we can use {ggplot2} to plot the stations indicating whether they
are still open or they are closed.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">ggplot</span>(south_west_agricultural_region) <span class="sc">+</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> sw_wa,</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>          <span class="at">alpha =</span> <span class="fl">0.65</span>,</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>          <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">colour =</span> status)) <span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>  <span class="fu">theme_map</span>()</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;south_west_agricultural_region&#39; not found</span></span></code></pre></div>
</div>
<div id="checking-station-uptime-or-availability" class="section level3">
<h3>Checking Station Uptime or Availability</h3>
</div>
<div id="example-14-checking-station-availability-for-current-year" class="section level3">
<h3>Example 14: Checking Station Availability for Current Year</h3>
<p>Check the availability of the Westonia station since the start of the
current year using the default functionality with no
<code>start_date</code> or <code>end_date</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>(WS001 <span class="ot">&lt;-</span> <span class="fu">get_dpird_availability</span>(</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>  <span class="at">station_code =</span> <span class="st">&quot;WS001&quot;</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>))</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_availability(station_code = &quot;WS001&quot;): could not find function &quot;get_dpird_availability&quot;</span></span></code></pre></div>
</div>
<div id="example-15-checking-station-availability-for-a-set-time-period" class="section level3">
<h3>Example 15: Checking Station Availability for a Set Time Period</h3>
<p>Check the availability of the Binnu station for January of 2018. When
a custom <code>start_date</code> is provided an <code>end_date</code>
must also be provided.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>(</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  BI_201801 <span class="ot">&lt;-</span> <span class="fu">get_dpird_availability</span>(</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>    <span class="at">station_code =</span> <span class="st">&quot;BI&quot;</span>,</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="st">&quot;2018-01-01&quot;</span>,</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>    <span class="at">end_date =</span> <span class="st">&quot;2018-01-31&quot;</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>  )</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>)</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co">#&gt; Error in get_dpird_availability(station_code = &quot;BI&quot;, start_date = &quot;2018-01-01&quot;, : could not find function &quot;get_dpird_availability&quot;</span></span></code></pre></div>
</div>
<div id="getting-station-metadata-for-the-dpird-network-stations" class="section level3">
<h3>Getting Station Metadata for the DPIRD Network Stations</h3>
<p>The <code>get_stations_metadata()</code> function is shared with the
SILO functions as well, so this function will retrieve data from both
weather APIs. Shown here is how to use it for DPIRD data only and with
an example of DPIRD specific information, namely including closed
stations and rich metadata.</p>
</div>
<div id="example-16-get-dpird-station-metadata" class="section level3">
<h3>Example 16: Get DPIRD Station Metadata</h3>
<p>The <code>get_stations_metadata()</code> function allows you to get
details about the stations themselves for stations in the DPIRD and SILO
(BOM) networks in one function. Here we demonstrate how to get the
metadata for the DPIRD stations only.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>(metadata <span class="ot">&lt;-</span> <span class="fu">get_stations_metadata</span>(<span class="at">which_api =</span> <span class="st">&quot;dpird&quot;</span>))</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co">#&gt; Error in get_stations_metadata(which_api = &quot;dpird&quot;): could not find function &quot;get_stations_metadata&quot;</span></span></code></pre></div>
</div>
<div id="example-17-get-rich-dpird-station-metadata-and-include-closed-stations" class="section level3">
<h3>Example 17: Get Rich DPIRD Station Metadata and Include Closed
Stations</h3>
<p>You can fetch additional information about the DPIRD stations as well
as getting data for stations that are no longer open like so with the
<code>rich</code> and <code>include_closed</code> arguments set to
<code>TRUE</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">library</span>(weatherOz)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#&gt; Error in library(weatherOz): there is no package called &#39;weatherOz&#39;</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>(metadata <span class="ot">&lt;-</span> <span class="fu">get_stations_metadata</span>(<span class="at">which_api =</span> <span class="st">&quot;dpird&quot;</span>,</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>                                  <span class="at">include_closed =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>                                  <span class="at">rich =</span> <span class="cn">TRUE</span>))</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co">#&gt; Error in get_stations_metadata(which_api = &quot;dpird&quot;, include_closed = TRUE, : could not find function &quot;get_stations_metadata&quot;</span></span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
